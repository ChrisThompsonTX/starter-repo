---
description: Frontend React component patterns and conventions
globs:
  - src/components/**/*.tsx
  - src/hooks/**/*.ts
alwaysApply: false
---

# Frontend Conventions

## Component Structure

Follow this structure for all components:

```tsx
// ============================================
// Component Name
// Brief description of what it does
// ============================================

import { useState } from 'react';
import { SomeIcon } from 'lucide-react';
import { useApiHook } from '../hooks/useApi';
import type { SomeType } from '../types';

// --------------------------------------------
// Types
// --------------------------------------------

interface Props {
  // Component props
}

interface FormState {
  // Local form state
}

// --------------------------------------------
// Component
// --------------------------------------------

export function ComponentName({ prop }: Props) {
  // 1. Hooks (queries, mutations)
  // 2. Local state
  // 3. Derived values
  // 4. Handlers
  // 5. Early returns (loading, error, empty)
  // 6. Main render
}

// --------------------------------------------
// Helper Components (if needed)
// --------------------------------------------

function HelperComponent() {
  // ...
}
```

## Data Fetching with React Query

Use the hooks from `../hooks/useApi.ts`:

```tsx
// Reading data
const { data, isLoading, error, refetch } = useProjects();

// Mutations
const createProject = useCreateProject();
const deleteProject = useDeleteProject();

// Using mutations
const handleCreate = async () => {
  try {
    await createProject.mutateAsync(input);
    // Success handling
  } catch (err) {
    console.error('Failed:', err);
  }
};
```

## Required States

Every component that fetches data MUST handle these states:

### Loading State
```tsx
if (isLoading) {
  return (
    <div className="flex items-center justify-center py-12">
      <Loader2 className="w-6 h-6 animate-spin text-indigo-600" />
      <span className="ml-2 text-gray-600">Loading...</span>
    </div>
  );
}
```

### Error State
```tsx
if (error) {
  return (
    <div className="py-12">
      <div className="bg-red-50 border border-red-200 rounded-lg p-4">
        <h3 className="text-red-800 font-medium">Error loading data</h3>
        <p className="text-red-600 text-sm mt-1">{error.message}</p>
        <button
          onClick={() => refetch()}
          className="mt-3 text-sm text-red-700 hover:text-red-800 font-medium"
        >
          Try again
        </button>
      </div>
    </div>
  );
}
```

### Empty State
```tsx
if (items.length === 0) {
  return (
    <div className="text-center py-12">
      <FolderOpen className="mx-auto h-12 w-12 text-gray-400" />
      <h3 className="mt-2 text-sm font-medium text-gray-900">No items</h3>
      <p className="mt-1 text-sm text-gray-500">
        Get started by creating your first item.
      </p>
    </div>
  );
}
```

## Forms

### Form Structure
```tsx
<form
  onSubmit={(e) => {
    e.preventDefault();
    handleSubmit();
  }}
  className="space-y-4"
>
  <div>
    <label
      htmlFor="field-id"
      className="block text-sm font-medium text-gray-700 mb-1"
    >
      Field Label
    </label>
    <input
      id="field-id"
      type="text"
      value={formState.field}
      onChange={(e) => setFormState({ ...formState, field: e.target.value })}
      className="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
      required
    />
  </div>

  <div className="flex justify-end gap-2 pt-2">
    <button type="button" onClick={handleCancel} className="...">
      Cancel
    </button>
    <button type="submit" disabled={isSubmitting} className="...">
      {isSubmitting ? <Loader2 className="animate-spin" /> : null}
      Submit
    </button>
  </div>
</form>
```

## Modals

Use this pattern for modals:

```tsx
{showModal && (
  <div className="fixed inset-0 z-50 overflow-y-auto">
    <div className="flex min-h-screen items-center justify-center p-4">
      {/* Backdrop */}
      <div
        className="fixed inset-0 bg-black bg-opacity-25"
        onClick={() => setShowModal(false)}
      />
      {/* Modal content */}
      <div className="relative bg-white rounded-lg shadow-xl max-w-md w-full p-6">
        <h3 className="text-lg font-medium text-gray-900 mb-4">
          Modal Title
        </h3>
        {/* Content */}
      </div>
    </div>
  </div>
)}
```

## Confirmation Dialogs

Always confirm destructive actions:

```tsx
const [showConfirm, setShowConfirm] = useState<string | null>(null);

// In render:
{showConfirm && (
  <ConfirmDialog
    title="Delete Item"
    message="Are you sure? This cannot be undone."
    confirmLabel="Delete"
    onConfirm={() => handleDelete(showConfirm)}
    onCancel={() => setShowConfirm(null)}
    isDestructive
  />
)}
```

## Button Styles

```tsx
// Primary
className="inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50"

// Secondary
className="inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50"

// Danger
className="inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 disabled:opacity-50"
```

## Icons

Use `lucide-react` for icons:

```tsx
import { Plus, Trash2, Edit2, Loader2, X, Check } from 'lucide-react';

// Usage
<Plus size={14} />
<Loader2 size={14} className="animate-spin" />
```

## Status Badges

```tsx
function StatusBadge({ status }: { status: string }) {
  const styles: Record<string, string> = {
    active: 'bg-green-100 text-green-800',
    archived: 'bg-gray-100 text-gray-800',
    revoked: 'bg-red-100 text-red-800',
  };

  return (
    <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium capitalize ${styles[status]}`}>
      {status}
    </span>
  );
}
```
